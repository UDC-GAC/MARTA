- kernel:
      name: "cost_model"
      path: "kernels/cost_model"
      description: "Setup for experiment cost_model"
      debug: False
      show_progress_bars: True
      preamble:
          command: "rm -Rf bin asm_codes && sudo cpupower frequency-set -u 2.1GHz && sudo cpupower frequency-set -d 2.1GHz"
      finalize:
          clean_tmp_files: False
          clean_asm_files: False
          clean_bin_files: False
          command: "echo 'alright!'"
      compilation:
          enabled: True
          processes: 32
          language: "C"
          compiler_flags: 
            { 
                "gcc": " -mtune=cascadelake ",
                #"icc": " -mtune=cascadelake ",
            }
          common_flags: " -mfma -mavx2 -DFULL_128BITS "
          inlined_kernel: True
          asm_syntax: "intel"
          asm_analysis: False
          debug: False
      configuration:
          kernel_cfg: [
        # test_case0
        " -DTEST_CASE=0 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=1006 -DX_IDX_B=898 -DX_IDX_C=1178 -DX_IDX_D=1070 
          -DA_IDX_A=5440 -DA_IDX_B=5440 -DA_IDX_C=5472 -DA_IDX_D=5472
          -DY_IDX_A=1192 -DY_IDX_B=1192 -DY_IDX_C=1196 -DY_IDX_D=1196",
        " -DTEST_CASE=0 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=4567 -DX_IDX_B=4583 -DX_IDX_C=4567 -DX_IDX_D=4583 
          -DA_IDX_A=4800 -DA_IDX_B=4800 -DA_IDX_C=4816 -DA_IDX_D=4816
          -DY_IDX_A=1728 -DY_IDX_B=1728 -DY_IDX_C=1744 -DY_IDX_D=1744",
        # test_case1
        " -DTEST_CASE=1 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=0 -DX_IDX_B=1 -DX_IDX_C=2 -DX_IDX_D=3 
          -DA_IDX_A=0 -DA_IDX_B=1 -DA_IDX_C=2 -DA_IDX_D=3
          -DY_IDX_A=0 -DY_IDX_B=0 -DY_IDX_C=0 -DY_IDX_D=0",
        " -DTEST_CASE=1 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=32 -DX_IDX_B=33 -DX_IDX_C=34 -DX_IDX_D=35 
          -DA_IDX_A=32 -DA_IDX_B=33 -DA_IDX_C=34 -DA_IDX_D=35
          -DY_IDX_A=0 -DY_IDX_B=0 -DY_IDX_C=0 -DY_IDX_D=0",
        # test_case2
         " -DTEST_CASE=2 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=0 -DX_IDX_B=1 -DX_IDX_C=2 -DX_IDX_D=3 
          -DA_IDX_A=0 -DA_IDX_B=1 -DA_IDX_C=2 -DA_IDX_D=3
          -DY_IDX_A=0 -DY_IDX_B=1 -DY_IDX_C=2 -DY_IDX_D=3",
        " -DTEST_CASE=2 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=4 -DX_IDX_B=5 -DX_IDX_C=6 -DX_IDX_D=7 
          -DA_IDX_A=4 -DA_IDX_B=5 -DA_IDX_C=6 -DA_IDX_D=7
          -DY_IDX_A=4 -DY_IDX_B=5 -DY_IDX_C=6 -DY_IDX_D=7",       
        # test_case3
        " -DTEST_CASE=3 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=1006 -DX_IDX_B=898 -DX_IDX_C=1178 -DX_IDX_D=1070 
          -DA_IDX_A=5440 -DA_IDX_B=5440 -DA_IDX_C=5472 -DA_IDX_D=5472
          -DY_IDX_A=1192 -DY_IDX_B=1192 -DY_IDX_C=1196 -DY_IDX_D=1196",
        " -DTEST_CASE=3 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=4611 -DX_IDX_B=4627 -DX_IDX_C=4612 -DX_IDX_D=4628 
          -DA_IDX_A=4800 -DA_IDX_B=4801 -DA_IDX_C=4816 -DA_IDX_D=4817
          -DY_IDX_A=1728 -DY_IDX_B=1729 -DY_IDX_C=1744 -DY_IDX_D=1745",
        # test_case4
        " -DTEST_CASE=4 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=0 -DX_IDX_B=3 -DX_IDX_C=2 -DX_IDX_D=5 
          -DA_IDX_A=0 -DA_IDX_B=2 -DA_IDX_C=2 -DA_IDX_D=4
          -DY_IDX_A=0 -DY_IDX_B=0 -DY_IDX_C=0 -DY_IDX_D=0",
        " -DTEST_CASE=4 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=4 -DX_IDX_B=8 -DX_IDX_C=6 -DX_IDX_D=10 
          -DA_IDX_A=4 -DA_IDX_B=9 -DA_IDX_C=6 -DA_IDX_D=11
          -DY_IDX_A=27 -DY_IDX_B=27 -DY_IDX_C=27 -DY_IDX_D=27",
        # test_case5
        " -DTEST_CASE=5 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=98 -DX_IDX_B=147 -DX_IDX_C=180 -DX_IDX_D=229 
          -DA_IDX_A=72 -DA_IDX_B=108 -DA_IDX_C=95 -DA_IDX_D=131
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1 -DY_IDX_D=1",
        " -DTEST_CASE=5 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=908 -DX_IDX_B=996 -DX_IDX_C=1098 -DX_IDX_D=1186 
          -DA_IDX_A=490 -DA_IDX_B=562 -DA_IDX_C=519 -DA_IDX_D=591
          -DY_IDX_A=27 -DY_IDX_B=27 -DY_IDX_C=27 -DY_IDX_D=27",
        # test_case6: 4+3 full reduction
        " -DBIN_NAME=test_case_6_0_128
          -DTEST_CASE=6 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=22 -DX_IDX_B=33 -DX_IDX_C=104 -DX_IDX_D=115 
          -DA_IDX_A=20 -DA_IDX_B=30 -DA_IDX_C=43 -DA_IDX_D=53
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1 -DY_IDX_D=1",
        " -DBIN_NAME=test_case_6_1_128
          -DTEST_CASE=6 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1 ",
        # test_case7: 4+3 two reductions
        " -DBIN_NAME=test_case_7_0_128
          -DTEST_CASE=7 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=22 -DX_IDX_B=33 -DX_IDX_C=104 -DX_IDX_D=115 
          -DA_IDX_A=20 -DA_IDX_B=30 -DA_IDX_C=43 -DA_IDX_D=53
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1 -DY_IDX_D=1",
        " -DBIN_NAME=test_case_7_1_128
          -DTEST_CASE=7 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=27 -DY_IDX_B=27 -DY_IDX_C=27 ",
        # test_case8: 4+3 reduction + scatter
        " -DBIN_NAME=test_case_8_0_128
          -DTEST_CASE=8 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=22 -DX_IDX_B=33 -DX_IDX_C=104 -DX_IDX_D=115 
          -DA_IDX_A=20 -DA_IDX_B=30 -DA_IDX_C=43 -DA_IDX_D=53
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1 -DY_IDX_D=1",
        " -DBIN_NAME=test_case_8_1_128
          -DTEST_CASE=8 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=50 -DY_IDX_B=73 -DY_IDX_C=96 ",
        # test_case9: 4+3 scatter + reduction
        " -DBIN_NAME=test_case_9_0_128
          -DTEST_CASE=9 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=22 -DX_IDX_B=33 -DX_IDX_C=104 -DX_IDX_D=115 
          -DA_IDX_A=20 -DA_IDX_B=30 -DA_IDX_C=43 -DA_IDX_D=53
          -DY_IDX_A=15 -DY_IDX_B=22 -DY_IDX_C=38 -DY_IDX_D=45",
        " -DBIN_NAME=test_case_9_1_128
          -DTEST_CASE=9 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=27 -DY_IDX_B=27 -DY_IDX_C=27 ",
        # test_case10: 4+3 full scatter
        " -DBIN_NAME=test_case_10_0_128
          -DTEST_CASE=10 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=22 -DX_IDX_B=33 -DX_IDX_C=104 -DX_IDX_D=115 
          -DA_IDX_A=20 -DA_IDX_B=30 -DA_IDX_C=43 -DA_IDX_D=53
          -DY_IDX_A=15 -DY_IDX_B=22 -DY_IDX_C=38 -DY_IDX_D=45",
        " -DBIN_NAME=test_case_10_1_128
          -DTEST_CASE=10 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=65 -DY_IDX_B=103 -DY_IDX_C=141 ",
        # test_case11: 4+3 two stores
        " -DBIN_NAME=test_case_11_0_128
          -DTEST_CASE=11 -DX_N=4 -DY_N=4 -DA_N=4
          -DX_IDX_A=22 -DX_IDX_B=33 -DX_IDX_C=104 -DX_IDX_D=115 
          -DA_IDX_A=20 -DA_IDX_B=30 -DA_IDX_C=43 -DA_IDX_D=53
          -DY_IDX_A=3 -DY_IDX_B=4 -DY_IDX_C=5 -DY_IDX_D=6",
        " -DBIN_NAME=test_case_11_1_128
          -DTEST_CASE=11 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=28 -DY_IDX_B=29 -DY_IDX_C=30 ",
        ###########################################
        # 3 + 3
        # test_case12: 3+3 full reduction
        " -DBIN_NAME=test_case_12_0_128
          -DTEST_CASE=12 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=0 -DX_IDX_B=82 -DX_IDX_C=164 
          -DA_IDX_A=0 -DA_IDX_B=23 -DA_IDX_C=46
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1",
        " -DBIN_NAME=test_case_12_1_128
          -DTEST_CASE=12 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1",
        # test_case13: 3+3 two reductions
        " -DBIN_NAME=test_case_13_0_128
          -DTEST_CASE=13 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=0 -DX_IDX_B=82 -DX_IDX_C=164 
          -DA_IDX_A=0 -DA_IDX_B=23 -DA_IDX_C=46
          -DY_IDX_A=1 -DY_IDX_B=1 -DY_IDX_C=1",
        " -DBIN_NAME=test_case_13_1_128
          -DTEST_CASE=13 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=27 -DY_IDX_B=27 -DY_IDX_C=27",
        # test_case14: 3+3 full scatter
        " -DBIN_NAME=test_case_14_0_128
          -DTEST_CASE=14 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=0 -DX_IDX_B=82 -DX_IDX_C=164 
          -DA_IDX_A=0 -DA_IDX_B=23 -DA_IDX_C=46
          -DY_IDX_A=1 -DY_IDX_B=8 -DY_IDX_C=15",
        " -DBIN_NAME=test_case_14_1_128
          -DTEST_CASE=14 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=50 -DY_IDX_B=73 -DY_IDX_C=96",
        # test_case15: 3+3 two mask stores
        " -DBIN_NAME=test_case_15_0_128
          -DTEST_CASE=15 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=0 -DX_IDX_B=82 -DX_IDX_C=164 
          -DA_IDX_A=0 -DA_IDX_B=23 -DA_IDX_C=46
          -DY_IDX_A=1 -DY_IDX_B=2 -DY_IDX_C=3",
        " -DBIN_NAME=test_case_15_1_128
          -DTEST_CASE=15 -DX_N=3 -DY_N=3 -DA_N=3
          -DX_IDX_A=190 -DX_IDX_B=380 -DX_IDX_C=570 
          -DA_IDX_A=29 -DA_IDX_B=58 -DA_IDX_C=87
          -DY_IDX_A=28 -DY_IDX_B=29 -DY_IDX_C=30",
        # test_case16: 3+2 full reduction
        # test_case17: 3+2 two reductions
        # test_case18: 3+2 full scatter
        # test_case19: 3+2 two stores
        # test_case20: 2+2 full reduction
        # test_case21: 2+2 two reductions
        # test_case22: 2+2 full scatter
        # test_case23: 2+2 two stores
          ]
          d_features:
                NO_SIMD:
                    evaluate: True
                    type: "static"
                    val_type: "numeric"
                    value: "[0]"                   
          flops: "0"
      execution:
          enabled: True
          papi_counters: [
            "CPU_CLK_THREAD_UNHALTED:THREAD_P",
            "INST_RETIRED:ANY_P",
            "UOPS_RETIRED:ALL",
            "UOPS_ISSUED:ALL",
            "UOPS_EXECUTED:THREAD",            
            "UOPS_RETIRED:STALL_CYCLES",
            "UOPS_ISSUED:STALL_CYCLES",
            "UOPS_EXECUTED:STALL_CYCLES",
            ]
          time: False
          tsc: False
          threshold_outliers: 3
          mean_and_discard_outliers: True
          nexec: 5
          nsteps: 1000000
          cpu_affinity: 11
          prefix: ""  
      output:
          name: "default"
          columns: "all"
          report: True
          verbose: True
